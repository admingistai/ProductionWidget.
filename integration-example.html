<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Secure Backend Widget Integration Example</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
      line-height: 1.6;
      color: #333;
    }
    
    .security-info {
      background: #e8f5e8;
      border: 2px solid #4caf50;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }
    
    .security-info h3 {
      margin-top: 0;
      color: #2e7d32;
    }
    
    .code-block {
      background: #f5f5f5;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 15px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
      margin: 15px 0;
    }
    
    .architecture-flow {
      background: #f0f8ff;
      border: 2px solid #2196f3;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      text-align: center;
    }
    
    .flow-step {
      display: inline-block;
      background: white;
      border: 1px solid #2196f3;
      border-radius: 4px;
      padding: 8px 12px;
      margin: 5px;
      font-weight: bold;
    }
    
    .arrow { 
      font-size: 20px; 
      color: #2196f3; 
      margin: 0 10px; 
    }
  </style>
</head>
<body>
  <h1>üîí Secure Backend Widget Integration</h1>
  
  <div class="security-info">
    <h3>‚úÖ Security Benefits</h3>
    <ul>
      <li><strong>No API Keys Exposed:</strong> Your OpenAI API key stays secure on YOUR backend</li>
      <li><strong>Cost Control:</strong> You control all API usage and costs</li>
      <li><strong>Rate Limiting:</strong> Prevent abuse with backend-side rate limiting</li>
      <li><strong>Safe Distribution:</strong> Widget can be safely distributed to any website</li>
    </ul>
  </div>

  <div class="architecture-flow">
    <h3>üèóÔ∏è Architecture Flow</h3>
    <div>
      <span class="flow-step">Website User</span>
      <span class="arrow">‚Üí</span>
      <span class="flow-step">Widget (Frontend)</span>
      <span class="arrow">‚Üí</span>
      <span class="flow-step">Your Backend</span>
      <span class="arrow">‚Üí</span>
      <span class="flow-step">OpenAI API</span>
    </div>
  </div>

  <h2>üìã Integration Steps</h2>
  
  <h3>Step 1: Deploy Your Backend</h3>
  <p>Deploy the <code>api/simple-chat.ts</code> file to Vercel, Railway, or your preferred platform with your OpenAI API key:</p>
  
  <div class="code-block">
# Environment Variables (on YOUR backend)
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=500
OPENAI_TEMPERATURE=0.7
  </div>

  <h3>Step 2: Build Widget with Your Backend URL</h3>
  <div class="code-block">
# .env.local (for building the widget)
VITE_WIDGET_API_ENDPOINT=https://your-backend.vercel.app/api/simple-chat
  </div>

  <h3>Step 3: Website Integration</h3>
  <p>Website owners simply add one script tag - <strong>NO API KEY NEEDED!</strong></p>
  
  <div class="code-block">
&lt;!-- Simple Integration --&gt;
&lt;script src="https://your-cdn.com/widget.iife.js"&gt;&lt;/script&gt;

&lt;!-- With Configuration --&gt;
&lt;script 
  src="https://your-cdn.com/widget.iife.js"
  data-config='{"theme":"light","placeholder":"How can I help?"}'&gt;
&lt;/script&gt;
  </div>

  <h2>üß™ Test the Widget</h2>
  <p>The widget below connects to a demo backend. In production, it would connect to YOUR secure backend:</p>

  <div class="security-info">
    <h3>‚ö†Ô∏è Demo Notice</h3>
    <p>This example uses a default endpoint that may not be configured. To test with a real backend:</p>
    <ol>
      <li>Deploy your backend with the OpenAI API key</li>
      <li>Build the widget with your backend URL</li>
      <li>Replace the script src below with your built widget</li>
    </ol>
  </div>

  <h2>üìù Website Content for Context</h2>
  <p>This is example content that the widget can read and use for context when answering questions.</p>
  
  <h3>About Our AI Widget Service</h3>
  <p>We provide secure, backend-powered AI chat widgets that can be easily integrated into any website. Our service ensures that API keys remain secure while providing powerful AI capabilities to end users.</p>
  
  <h3>Key Features</h3>
  <ul>
    <li>Secure backend API architecture</li>
    <li>Website context awareness</li>
    <li>Customizable themes and styling</li>
    <li>Easy one-script integration</li>
    <li>Cost and usage control</li>
    <li>Rate limiting and abuse prevention</li>
  </ul>

  <h3>Pricing</h3>
  <p>Our pricing is based on actual OpenAI API usage, giving you full cost transparency and control. No hidden fees or markup - you pay only for what you use.</p>

  <!-- Widget Integration (loads from built widget with backend configuration) -->
  <script src="./dist/widget.iife.js"></script>
  
  <script>
    // Log widget status for debugging
    setTimeout(() => {
      if (window.GistWidget) {
        console.log('‚úÖ Widget loaded successfully');
        console.log('Widget API:', window.GistWidget);
      } else {
        console.error('‚ùå Widget failed to load');
      }
    }, 1000);
  </script>
</body>
</html>