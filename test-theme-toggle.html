<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Widget Theme Toggle Test</title>
  <link rel="icon" type="image/svg+xml" href="./public/svg-2.svg">
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      padding: 40px;
      max-width: 800px;
      margin: 0 auto;
      transition: background-color 0.3s ease;
    }
    body.light {
      background: #f5f5f5;
      color: #333;
    }
    body.dark {
      background: #1a1a1a;
      color: #fff;
    }
    .controls {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    button {
      margin: 5px;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      background: #3b82f6;
      color: white;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 16px;
    }
    button:hover {
      background: #2563eb;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }
    .theme-preview {
      display: flex;
      gap: 40px;
      margin-top: 30px;
      flex-wrap: wrap;
    }
    .preview-card {
      flex: 1;
      min-width: 300px;
      padding: 30px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }
    .preview-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
    }
    .light-preview {
      background: white;
      color: #333;
    }
    .dark-preview {
      background: #1d1d1d;
      color: white;
    }
    .color-info {
      margin-top: 20px;
      font-family: monospace;
      font-size: 14px;
      opacity: 0.8;
    }
    .gradient-display {
      width: 100px;
      height: 100px;
      margin: 20px auto;
      border-radius: 8px;
      background: linear-gradient(135deg, #608097 0%, #CA061A 100%);
    }
    h1 {
      margin-bottom: 30px;
    }
  </style>
</head>
<body class="light">
  <h1>Widget Theme Toggle Test</h1>
  
  <div class="controls">
    <h2>Theme Controls</h2>
    <p>Test the star icon colors in different themes:</p>
    <button onclick="setTheme('light')">Light Theme</button>
    <button onclick="setTheme('dark')">Dark Theme</button>
    <button onclick="toggleWidgetTheme()">Toggle Widget Theme</button>
  </div>
  
  <div class="theme-preview">
    <div class="preview-card light-preview">
      <h3>Light Mode</h3>
      <p>Stars should show gradient:</p>
      <div class="gradient-display"></div>
      <div class="color-info">
        From: #608097<br>
        To: #CA061A
      </div>
    </div>
    
    <div class="preview-card dark-preview">
      <h3>Dark Mode</h3>
      <p>Stars should be white</p>
      <div style="width: 100px; height: 100px; margin: 20px auto; border-radius: 8px; background: white;"></div>
      <div class="color-info">
        Color: #FFFFFF
      </div>
    </div>
  </div>

  <!-- Load widget -->
  <script src="./dist/widget.iife.js"></script>
  
  <script>
    let currentTheme = 'light';
    
    function setTheme(theme) {
      currentTheme = theme;
      document.body.className = theme;
      
      // Reinitialize widget with new theme
      if (window.GistWidget) {
        window.GistWidget.destroy();
        window.GistWidget.init({
          theme: theme,
          placeholder: 'Test widget...',
          enableWebsiteContext: true
        });
      }
    }
    
    function toggleWidgetTheme() {
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      setTheme(newTheme);
    }
    
    // Initialize with light theme
    setTimeout(() => {
      setTheme('light');
    }, 100);
  </script>
</body>
</html>